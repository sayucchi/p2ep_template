function START()
{
    enableSaving(false);
    screenEffectInit();
    screenFade(160, 120, rgb(255,255,255), rgb(255,255,255), sub);
    sndMusicPlay(sound_3005, 127);
    levelFootstepSet(sfx_19);
    objAnimRotate(obj_28, 0, 360, 0, 300, 1);
    cameraSet(southwest, 230, 0, -1150);
    ref_7 = spriteLoad(sprite_6);
    wait(ref_7);
    ref_9 = spriteLoad(sprite_d);
    wait(ref_9);
    ref_b = spriteLoad(sprite_9c);
    wait(ref_b);
    ref_d = spriteLoad(sprite_a9);
    wait(ref_d);
    ref_f = spriteLoad(sprite_0);
    wait(ref_f);
    unitSpawn(shopkeeper, sprite_9c, 130, 0, -910, west, none);
    unitSpawn(tamaki, sprite_a9, 450, 0, -1160, east, none);
    unitAnimationPlay(tamaki, animation_24, 1);
    bitGet(var_0, EBIT_E0016);
    bne(var_0, 0, label_17);
    b(label_30);
  label_17:
    bne(var_0, 1, label_30);
    enableSaving(true);
    cameraSet(west, 170, 0, -880);
    ref_1a = spriteLoad(sprite_2);
    wait(ref_1a);
    playerInit(northwest);
    controlDisable();
    unitSpawn(ulala, sprite_6, 610, 30, -960, south, none);
    unitSpawn(katsuya, sprite_d, 650, 30, -740, north, none);
    unitSpawn(shopkeeper, sprite_9c, 120, 0, -1120, east, none);
    unitSpawn(tamaki, sprite_a9, 510, 0, -1220, south, none);
    unitTriggerSet(ulala, B_URARATI, 255, 1);
    unitTriggerSet(katsuya, B_KATUYYY, 255, 1);
    unitTriggerSet(shopkeeper, SHOP, 255, 1);
    unitTriggerSet(tamaki, TAMAKI, 255, 1);
    envTriggerSet(DOORBOX, 131, 1, line, coll_0);
    envTriggerSet(OKUNOHEYA, 14, 1, line, coll_2);
    ref_28 = call(NEKOMATACHECK);
    wait(ref_28);
    objCollisionLink(line, coll_d, obj_11);
    envTriggerSet(HONDANA, 14, 1, line, coll_d);
    envTriggerSet(MAGAZIN, 14, 1, line, coll_21);
    unitIdleOnAll();
    b(label_1e1);
    b(label_30);
  label_30:
    screenEffectUnknown();
    screenFadeInner(rgb(0,0,0), 4, true);
    screenFadeOuter(rgb(0,0,0), 4, true);
    screenFadeWait(inner);
    screenFadeWait(outer);
    delayClear();
    delayWait(90);
    cameraRotateTo(3, 90);
    delayClear();
    delayWait(15);
    cameraMoveTo(690, 0, -1210, 90);
    sndMusicPlay(sound_30d9, 127);
    objAnimRotate(obj_5b, 0, 70, 0, 30, 0);
    objAnimRotate(obj_5a, 0, -70, 0, 30, 0);
    objAnimWait(obj_5b);
    objAnimWait(obj_5a);
    unitAnimationPlay(tamaki, animation_0, 1);
    unitSpawn(katsuya, sprite_d, 800, 0, -1460, south, fade);
    unitMove(katsuya, 690, -1160, face_south, medium);
    delayClear();
    delayWait(30);
    unitAnimationPlay(tamaki, animation_a, 1);
    unitSpawn(maya, sprite_0, 800, 0, -1460, south, fade);
    unitMove(maya, 720, -1240, face_south, medium);
    unitWait(maya);
    delayClear();
    delayWait(30);
    unitAnimationPlay(katsuya, animation_1a, 1);
    unitAnimationPlay(maya, animation_3, 1);
    delayClear();
    delayWait(12);
    unitFace(maya, east);
    unitAnimationPlay(maya, animation_0, 1);
    delayClear();
    delayWait(15);
    sndMusicPlay(sound_30da, 127);
    objAnimRotate(obj_5b, 0, -70, 0, 30, 0);
    objAnimRotate(obj_5a, 0, 70, 0, 30, 0);
    unitSpawn(ulala, sprite_6, 800, 0, -1460, south, fade);
    unitMove(ulala, 830, -1210, face_south, medium);
    unitWait(ulala);
    objAnimWait(obj_5b);
    objAnimWait(obj_5a);
    unitAnimationPlay(ulala, animation_28, 1);
    unitWait(ulala);
    delayClear();
    delayWait(15);
    unitMove(tamaki, 590, -1210, face_west, fast);
    unitAnimationPlay(katsuya, animation_0, 1);
    unitWait(katsuya);
    unitAnimationPlay(katsuya, animation_3, 1);
    unitWait(katsuya);
    unitFace(katsuya, east);
    unitAnimationPlay(katsuya, animation_0, 1);
    unitWait(tamaki);
    unitAnimationPlay(ulala, animation_1, 1);
    delayClear();
    delayWait(12);
    unitFace(ulala, west);
    unitAnimationPlay(ulala, animation_a, 1);
    unitWait(ulala);
    delayClear();
    delayWait(15);
    unitAnimationPlay(ulala, animation_2a, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(tamaki, animation_24, 1);
    ref_73 = bustupLoad(bustup_e6);
    bustupWait(ref_73);
    ref_75 = bustupAlloc(ref_73, right, rgb(0,0,0));
    bustupFade(ref_75, rgb(128,0,0), 30);
    ref_77 = dialogAlloc();
    ref_78 = msgShow(msg_0);
/***************************************
[color(yellow)]Tamaki[color(white)]
[tab]Welcome!
[tab]We take cases of all kinds, from
[tab]secret love affairs to ghosts!
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_78);
    unitAnimationPlay(tamaki, animation_0, 1);
    ref_7c = msgShow(msg_1);
/***************************************
[color(yellow)]Tamaki[color(white)]
[tab][color(green)]While going to college, she
[tab]works as a Devil Summoner.[color(white)]
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_7c);
    dialogFree(ref_77);
    ref_80 = bustupFade(ref_75, rgb(0,0,0), 10);
    bustupWait(ref_80);
    bustupFree(ref_75);
    unitAnimationPlay(katsuya, animation_2d, 1);
    ref_84 = bustupLoad(bustup_21);
    bustupWait(ref_84);
    ref_86 = bustupAlloc(ref_84, left, rgb(0,0,0));
    bustupFade(ref_86, rgb(128,0,0), 30);
    ref_88 = dialogAlloc();
    ref_89 = msgShow(msg_2);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]Well, no.
[tab]I want to ask something...
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_89);
    dialogFree(ref_88);
    ref_8d = bustupFade(ref_86, rgb(0,0,0), 10);
    bustupWait(ref_8d);
    bustupFree(ref_86);
    screenEffectInit();
    screenFade(160, 120, rgb(0,0,0), rgb(0,0,0), sub);
    screenFadeInner(rgb(255,255,255), 9, false);
    screenFadeOuter(rgb(255,255,255), 9, false);
    screenFadeWait(inner);
    screenFadeWait(outer);
    cameraRotateTo(7, 5);
    cameraMoveTo(330, 0, -660, 5);
    objAnimTranslate(obj_28, 50, 0, 50, 5);
    unitSpawn(katsuya, sprite_d, 390, 0, -630, east, none);
    unitSpawn(shopkeeper, sprite_9c, 190, 0, -670, west, none);
    unitSpawn(tamaki, sprite_a9, 160, 0, -520, west, none);
    unitSpawn(maya, sprite_0, 460, 0, -700, east, none);
    unitSpawn(ulala, sprite_6, 410, 0, -800, east, none);
    unitAnimationPlay(ulala, animation_3, 1);
    delayClear();
    delayWait(75);
    screenEffectUnknown();
    screenFadeInner(rgb(0,0,0), 9, true);
    screenFadeOuter(rgb(0,0,0), 9, true);
    unitAnimationPlay(katsuya, animation_2d, 1);
    screenFadeWait(inner);
    screenFadeWait(outer);
    delayClear();
    delayWait(180);
    unitAnimationPlay(katsuya, animation_0, 1);
    delayClear();
    delayWait(45);
    unitAnimationPlay(tamaki, animation_3, 1);
    delayClear();
    delayWait(12);
    unitFace(tamaki, north);
    unitAnimationPlay(tamaki, animation_0, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(shopkeeper, animation_1, 1);
    delayClear();
    delayWait(7);
    unitAnimationPlay(shopkeeper, animation_2, 1);
    delayClear();
    delayWait(120);
    unitAnimationPlay(shopkeeper, animation_1, 1);
    delayClear();
    delayWait(7);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    delayClear();
    delayWait(45);
    unitAnimationPlay(tamaki, animation_1, 1);
    delayClear();
    delayWait(12);
    unitFace(tamaki, west);
    unitAnimationPlay(tamaki, animation_0, 1);
    unitAnimationPlay(shopkeeper, animation_24, 1);
    ref_c5 = bustupLoad(bustup_e5);
    bustupWait(ref_c5);
    ref_c7 = bustupAlloc(ref_c5, right, rgb(0,0,0));
    bustupFade(ref_c7, rgb(128,0,0), 30);
    ref_c9 = dialogAlloc();
    ref_ca = msgShow(msg_3);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]I’ve never taken a request to spread rumors,
[tab]but someone did come in to ask if the
[tab]Joker rumor was spread.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_ca);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    ref_ce = msgShow(msg_4);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab][color(green)]He used to be a flunky, but
[tab]he all of a sudden got smart.
[tab]Now, he works as a Devil Summoner.[color(white)]
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_ce);
    dialogFree(ref_c9);
    ref_d2 = bustupFade(ref_c7, rgb(0,0,0), 10);
    bustupWait(ref_d2);
    bustupFree(ref_c7);
    unitAnimationPlay(tamaki, animation_6, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(tamaki, animation_0, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(tamaki, animation_6, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(tamaki, animation_0, 1);
    unitWait(shopkeeper);
    delayClear();
    delayWait(30);
    unitAnimationPlay(katsuya, animation_1, 1);
    delayClear();
    delayWait(7);
    unitAnimationPlay(katsuya, animation_2, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(ulala, animation_3, 1);
    delayClear();
    delayWait(12);
    unitFace(ulala, south);
    unitWait(ulala);
    unitAnimationPlay(ulala, animation_0, 1);
    delayClear();
    delayWait(90);
    unitAnimationPlay(katsuya, animation_1, 1);
    delayClear();
    delayWait(7);
    unitAnimationPlay(katsuya, animation_0, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(ulala, animation_3, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(ulala, animation_4, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(katsuya, animation_2d, 1);
    ref_fd = bustupLoad(bustup_21);
    bustupWait(ref_fd);
    ref_ff = bustupAlloc(ref_fd, left, rgb(0,0,0));
    bustupFade(ref_ff, rgb(128,0,0), 30);
    ref_101 = dialogAlloc();
    ref_102 = msgShow(msg_5);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]What kind of person was he?
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_102);
    unitAnimationPlay(katsuya, animation_0, 1);
    dialogFree(ref_101);
    ref_107 = bustupFade(ref_ff, rgb(0,0,0), 10);
    bustupWait(ref_107);
    bustupFree(ref_ff);
    unitAnimationPlay(tamaki, animation_24, 1);
    delayClear();
    delayWait(180);
    unitAnimationPlay(tamaki, animation_0, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(ulala, animation_3, 1);
    delayClear();
    delayWait(7);
    unitAnimationPlay(ulala, animation_0, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(ulala, animation_2d, 1);
    ref_117 = bustupLoad(bustup_17);
    bustupWait(ref_117);
    ref_119 = bustupAlloc(ref_117, left, rgb(0,0,0));
    bustupFade(ref_119, rgb(128,0,0), 30);
    ref_11b = dialogAlloc();
    ref_11c = msgShow(msg_6);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]That’s the "D五j二 Vu Boy".
[tab]Ma-ya says so, too.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_11c);
    dialogFree(ref_11b);
    ref_120 = bustupFade(ref_119, rgb(0,0,0), 10);
    bustupWait(ref_120);
    bustupFree(ref_119);
    unitAnimationPlay(ulala, animation_0, 1);
    delayClear();
    delayWait(45);
    unitAnimationPlay(shopkeeper, animation_1, 1);
    delayClear();
    delayWait(60);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    delayClear();
    delayWait(12);
    unitAnimationPlay(shopkeeper, animation_3, 1);
    delayClear();
    delayWait(60);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    delayClear();
    delayWait(12);
    unitAnimationPlay(shopkeeper, animation_1, 1);
    delayClear();
    delayWait(12);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    delayClear();
    delayWait(12);
    unitAnimationPlay(shopkeeper, animation_3, 1);
    delayClear();
    delayWait(12);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    unitAnimationPlay(shopkeeper, animation_24, 1);
    unitAnimationPlay(ulala, animation_3, 1);
    unitAnimationPlay(maya, animation_0, 1);
    ref_13f = bustupLoad(bustup_e5);
    bustupWait(ref_13f);
    ref_141 = bustupAlloc(ref_13f, right, rgb(0,0,0));
    bustupFade(ref_141, rgb(128,0,0), 30);
    ref_143 = dialogAlloc();
    ref_144 = msgShow(msg_7);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]Tell me a little more.
[tab]I don’t know what you’re talking about.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_144);
    dialogFree(ref_143);
    ref_148 = bustupFade(ref_141, rgb(0,0,0), 10);
    bustupWait(ref_148);
    bustupFree(ref_141);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    delayClear();
    delayWait(60);
    unitAnimationPlay(katsuya, animation_1, 1);
    delayClear();
    delayWait(12);
    unitFace(katsuya, north);
    unitAnimationPlay(katsuya, animation_0, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(ulala, animation_0, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(katsuya, animation_25, 1);
    unitWait(katsuya);
    delayClear();
    delayWait(60);
    unitAnimationPlay(ulala, animation_3, 1);
    delayClear();
    delayWait(12);
    unitFace(ulala, east);
    unitAnimationPlay(ulala, animation_0, 1);
    unitWait(ulala);
    delayClear();
    delayWait(15);
    unitAnimationPlay(ulala, animation_2d, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(katsuya, animation_1, 1);
    delayClear();
    delayWait(12);
    unitFace(katsuya, east);
    unitAnimationPlay(katsuya, animation_0, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(shopkeeper, animation_6, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(shopkeeper, animation_6, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    unitWait(shopkeeper);
    unitAnimationPlay(ulala, animation_0, 1);
    delayClear();
    delayWait(45);
    unitAnimationPlay(shopkeeper, animation_6, 1);
    ref_17d = bustupLoad(bustup_e5);
    bustupWait(ref_17d);
    ref_17f = bustupAlloc(ref_17d, right, rgb(0,0,0));
    bustupFade(ref_17f, rgb(128,0,0), 30);
    ref_181 = dialogAlloc();
    ref_182 = msgShow(msg_8);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]I see... very interesting.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_182);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    ref_186 = msgShow(msg_9);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]The bizarre serial murders, the rumors of
[tab]the Joker, the sighting of demons...
[tab]It all makes sense if the rumors are true.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_186);
    unitAnimationPlay(shopkeeper, animation_24, 1);
    ref_18a = msgShow(msg_10);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]I’ll accept the request to spread that
[tab]anti-Joker rumor. It’s a good chance to
[tab]see if a rumor can become reality.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_18a);
    dialogFree(ref_181);
    ref_18e = bustupFade(ref_17f, rgb(0,0,0), 10);
    bustupWait(ref_18e);
    bustupFree(ref_17f);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    delayClear();
    delayWait(75);
    unitAnimationPlay(ulala, animation_1d, 1);
    delayClear();
    delayWait(30);
    ref_197 = bustupLoad(bustup_17);
    bustupWait(ref_197);
    ref_199 = bustupAlloc(ref_197, left, rgb(0,0,0));
    bustupFade(ref_199, rgb(128,0,0), 30);
    ref_19b = dialogAlloc();
    ref_19c = msgShow(msg_11);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]You seemed to have accepted that quickly.
[tab]You’re not gonna report it to the hospital?
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_19c);
    dialogFree(ref_19b);
    ref_1a0 = bustupFade(ref_199, rgb(0,0,0), 10);
    bustupWait(ref_1a0);
    bustupFree(ref_199);
    unitAnimationPlay(ulala, animation_0, 1);
    delayClear();
    delayWait(60);
    unitAnimationHold(shopkeeper, animation_28, -1);
    delayClear();
    delayWait(200);
    ref_1a9 = bustupLoad(bustup_e5);
    bustupWait(ref_1a9);
    ref_1ab = bustupAlloc(ref_1a9, right, rgb(0,0,0));
    bustupFade(ref_1ab, rgb(128,0,0), 30);
    ref_1ad = dialogAlloc();
    ref_1ae = msgShow(msg_12);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]The world is filled with mystery.
[tab]We can’t be held down by "common sense".
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_1ae);
    unitAnimationStop(shopkeeper);
    unitWait(shopkeeper);
    delayClear();
    delayWait(12);
    unitAnimationPlay(shopkeeper, animation_24, 1);
    ref_1b6 = msgShow(msg_13);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]Well, then...
[tab]A real man goes by his own rules.
[tab]First, ask me to spread the rumor.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_1b6);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_1ad);
    ref_1bb = bustupFade(ref_1ab, rgb(0,0,0), 10);
    bustupWait(ref_1bb);
    bustupFree(ref_1ab);
    delayClear();
    delayWait(60);
    screenEffectInit();
    screenFade(160, 120, rgb(0,0,0), rgb(0,0,0), sub);
    screenFadeInner(rgb(255,255,255), 9, false);
    screenFadeOuter(rgb(255,255,255), 9, false);
    screenFadeWait(inner);
    screenFadeWait(outer);
    unitTriggerSet(ulala, B_URARATI, 255, 1);
    unitTriggerSet(katsuya, B_KATUYYY, 255, 1);
    unitTriggerSet(shopkeeper, SHOP, 255, 1);
    unitTriggerSet(tamaki, TAMAKI, 255, 1);
    envTriggerSet(DOORBOX, 131, 1, line, coll_0);
    envTriggerSet(OKUNOHEYA, 14, 1, line, coll_2);
    objCollisionLink(line, coll_d, obj_11);
    envTriggerSet(HONDANA, 14, 1, line, coll_d);
    envTriggerSet(MAGAZIN, 14, 1, line, coll_21);
    ref_1cf = call(NEKOMATACHECK);
    wait(ref_1cf);
    unitSpawn(ulala, sprite_6, 610, 30, -960, south, none);
    unitSpawn(katsuya, sprite_d, 650, 30, -740, north, none);
    unitSpawn(shopkeeper, sprite_9c, 120, 0, -1020, west, none);
    unitSpawn(tamaki, sprite_a9, 510, 0, -1220, south, none);
    unitSpawn(maya, sprite_0, 400, 0, -730, east, none);
    ref_1d6 = cameraLookAtUnit(maya, 0, 5);
    wait(ref_1d6);
    ref_1d8 = spriteLoad(sprite_0);
    wait(ref_1d8);
    ref_1da = spriteLoad(sprite_2);
    wait(ref_1da);
    unitDespawn(maya, none);
    playerInit(northwest);
    controlDisable();
    unitIdleOnAll();
    objAnimTranslate(obj_28, -50, 0, -50, 5);
  label_1e1:
    delayClear();
    delayWait(75);
    screenEffectUnknown();
    screenFadeInner(rgb(0,0,0), 9, true);
    screenFadeOuter(rgb(0,0,0), 9, true);
    screenFadeWait(inner);
    screenFadeWait(outer);
    controlEnable();
}

function B_URARATI()
{
    controlDisable();
    unitFacePlayer(ulala);
    bitGet(var_0, MBIT_KE_MONSYOU);
    bne(var_0, 0, label_1fd);
    unitAnimationPlay(ulala, animation_2d, 1);
    ref_1ef = bustupLoad(bustup_17);
    bustupWait(ref_1ef);
    ref_1f1 = bustupAlloc(ref_1ef, left, rgb(0,0,0));
    bustupFade(ref_1f1, rgb(128,0,0), 30);
    ref_1f3 = dialogAlloc();
    ref_1f4 = msgShow(msg_14);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]Ask him Ma-ya.
[tab]You got nothing to lose.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_1f4);
    dialogFree(ref_1f3);
    unitAnimationPlay(ulala, animation_0, 1);
    ref_1f9 = bustupFade(ref_1f1, rgb(0,0,0), 10);
    bustupWait(ref_1f9);
    bustupFree(ref_1f1);
    b(label_20d);
  label_1fd:
    bne(var_0, 1, label_20d);
    unitAnimationPlay(ulala, animation_2d, 1);
    ref_1ff = bustupLoad(bustup_17);
    bustupWait(ref_1ff);
    ref_201 = bustupAlloc(ref_1ff, left, rgb(0,0,0));
    bustupFade(ref_201, rgb(128,0,0), 30);
    ref_203 = dialogAlloc();
    ref_204 = msgShow(msg_15);
/***************************************
[color(yellow)]Ulala[color(white)]
[tab]That man doesn’t look sharp,
[tab]but he’s a good man inside!
[tab]My "man-tenna" reads wildly.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_204);
    dialogFree(ref_203);
    unitAnimationPlay(ulala, animation_0, 1);
    ref_209 = bustupFade(ref_201, rgb(0,0,0), 10);
    bustupWait(ref_209);
    bustupFree(ref_201);
    b(label_20d);
  label_20d:
    unitRestoreFacing(ulala);
    controlEnable();
}

function B_KATUYYY()
{
    controlDisable();
    unitFacePlayer(katsuya);
    bitGet(var_0, MBIT_KE_MONSYOU);
    bne(var_0, 0, label_223);
    unitAnimationPlay(katsuya, animation_2d, 1);
    ref_215 = bustupLoad(bustup_21);
    bustupWait(ref_215);
    ref_217 = bustupAlloc(ref_215, left, rgb(0,0,0));
    bustupFade(ref_217, rgb(128,0,0), 30);
    ref_219 = dialogAlloc();
    ref_21a = msgShow(msg_16);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]Telling us to spread rumors means
[tab]the boy must believe it too...
[tab]Who is he...?
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_21a);
    dialogFree(ref_219);
    unitAnimationPlay(katsuya, animation_0, 1);
    ref_21f = bustupFade(ref_217, rgb(0,0,0), 10);
    bustupWait(ref_21f);
    bustupFree(ref_217);
    b(label_233);
  label_223:
    bne(var_0, 1, label_233);
    unitAnimationPlay(katsuya, animation_2d, 1);
    ref_225 = bustupLoad(bustup_21);
    bustupWait(ref_225);
    ref_227 = bustupAlloc(ref_225, left, rgb(0,0,0));
    bustupFade(ref_227, rgb(128,0,0), 30);
    ref_229 = dialogAlloc();
    ref_22a = msgShow(msg_17);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]"Baofu", huh...
[tab]How can he say he’ll know by meeting?
[tab]I don’t like it...
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_22a);
    dialogFree(ref_229);
    unitAnimationPlay(katsuya, animation_0, 1);
    ref_22f = bustupFade(ref_227, rgb(0,0,0), 10);
    bustupWait(ref_22f);
    bustupFree(ref_227);
    b(label_233);
  label_233:
    unitRestoreFacing(katsuya);
    controlEnable();
}

function SHOP()
{
    controlDisable();
    unitFacePlayer(shopkeeper);
    ref_238 = shopOverlayInit();
    ref_239 = bustupLoad(bustup_e5);
    bustupWait(ref_239);
    ref_23b = bustupAlloc(ref_239, right, rgb(0,0,0));
    bustupFade(ref_23b, rgb(128,0,0), 30);
    choiceSetResult(3);
    op_105(3);
    ref_23f = dialogAlloc();
    ref_240 = msgShow(msg_18);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]Everything has to be settled.
[tab]That will never change.
[tab]Remember the procedure.
[choice(5)]Spread rumors
Check Rumors
Talk with the Chief
Cancel
[if_all(EBIT_E0016)]Leave the detective agency
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_0, 1);
    unitWait(shopkeeper);
    delayClear();
    delayWait(30);
    unitAnimationPlay(shopkeeper, animation_19, 1);
    wait(ref_240);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_24c);
    li(var_5, 0);
    b(label_265);
  label_24c:
    bne(var_0, 1, label_24f);
    li(var_5, 1);
    b(label_265);
  label_24f:
    bne(var_0, 2, label_25f);
    choiceSetResult(2);
    op_105(2);
    ref_252 = msgShow(msg_19);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]What’s on your mind?
[choice(3)]Make small talk
Ask about rumors
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    wait(ref_252);
    choiceGetResult(var_0);
    bne(var_0, 0, label_258);
    li(var_5, 2);
    b(label_25e);
  label_258:
    bne(var_0, 1, label_25b);
    li(var_5, 2000);
    b(label_25e);
  label_25b:
    bne(var_0, 2, label_25e);
    li(var_5, 1000);
    b(label_25e);
  label_25e:
    b(label_265);
  label_25f:
    bne(var_0, 3, label_262);
    li(var_5, 3);
    b(label_265);
  label_262:
    bne(var_0, 4, label_265);
    li(var_5, 4);
    b(label_265);
  label_265:
    dialogFree(ref_23f);
    unitWait(shopkeeper);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    unitWait(shopkeeper);
    ref_269 = bustupFade(ref_23b, rgb(0,0,0), 10);
    bustupWait(ref_269);
    bustupFree(ref_23b);
    wait(ref_238);
    shopInventory(14, shopInventory_0);
    shopRate(100);
    ref_26f = shopOpen(15);
    wait(ref_26f);
}

function HA_SHOP_RESTART_0()
{
    choiceSetResult(3);
    op_105(3);
    ref_274 = bustupLoad(bustup_e5);
    bustupWait(ref_274);
    ref_276 = bustupAlloc(ref_274, right, rgb(0,0,0));
    bustupFade(ref_276, rgb(128,0,0), 30);
    ref_278 = dialogAlloc();
    ref_279 = msgShow(msg_20);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]Anything else?
[choice(5)]Spread rumors
Check Rumors
Talk with the Chief
Cancel
[if_all(EBIT_E0016)]Leave the detective agency
[end_choice][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_1f, 1);
    wait(ref_279);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    li(var_1, 0);
    choiceGetResult(var_0);
    bne(var_0, 0, label_282);
    li(var_5, 0);
    b(label_29b);
  label_282:
    bne(var_0, 1, label_285);
    li(var_5, 1);
    b(label_29b);
  label_285:
    bne(var_0, 2, label_295);
    choiceSetResult(2);
    op_105(2);
    ref_288 = msgShow(msg_21);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]What’s on your mind?
[choice(3)]Make small talk
Ask about rumors
[if_all(EBIT_SINARIOFF)]Hidden items
[end_choice][clear]
***************************************/
    wait(ref_288);
    choiceGetResult(var_0);
    bne(var_0, 0, label_28e);
    li(var_5, 2);
    b(label_294);
  label_28e:
    bne(var_0, 1, label_291);
    li(var_5, 2000);
    b(label_294);
  label_291:
    bne(var_0, 2, label_294);
    li(var_5, 1000);
    b(label_294);
  label_294:
    b(label_29b);
  label_295:
    bne(var_0, 3, label_298);
    li(var_5, 3);
    b(label_29b);
  label_298:
    bne(var_0, 4, label_29b);
    li(var_5, 4);
    b(label_29b);
  label_29b:
    dialogFree(ref_278);
    ref_29c = bustupFade(ref_276, rgb(0,0,0), 10);
    bustupWait(ref_29c);
    bustupFree(ref_276);
}

function HA_SHOP_TALK_0()
{
    bitGet(var_0, MBIT_KE_MONSYOU);
    bne(var_0, 0, label_2b1);
    unitAnimationPlay(shopkeeper, animation_24, 1);
    ref_2a3 = bustupLoad(bustup_e5);
    bustupWait(ref_2a3);
    ref_2a5 = bustupAlloc(ref_2a3, right, rgb(0,0,0));
    bustupFade(ref_2a5, rgb(128,0,0), 30);
    ref_2a7 = dialogAlloc();
    ref_2a8 = msgShow(msg_22);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]Hurry and make a request. Don’t you
[tab]want to see if a rumor indeed becomes real?
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_2a8);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_2a7);
    ref_2ad = bustupFade(ref_2a5, rgb(0,0,0), 10);
    bustupWait(ref_2ad);
    bustupFree(ref_2a5);
    b(label_2c4);
  label_2b1:
    bne(var_0, 1, label_2c4);
    unitAnimationPlay(shopkeeper, animation_24, 1);
    ref_2b3 = bustupLoad(bustup_e5);
    bustupWait(ref_2b3);
    ref_2b5 = bustupAlloc(ref_2b3, right, rgb(0,0,0));
    bustupFade(ref_2b5, rgb(128,0,0), 30);
    ref_2b7 = dialogAlloc();
    ref_2b8 = msgShow(msg_23);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]Merely fighting demons isn’t skill.
[tab]Try negotiating with them.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_2b8);
    ref_2bb = msgShow(msg_24);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]How do I know this stuff?
[tab]I look like this, but I do
[tab]work in a demon-related business...
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_2bb);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_2b7);
    ref_2c0 = bustupFade(ref_2b5, rgb(0,0,0), 10);
    bustupWait(ref_2c0);
    bustupFree(ref_2b5);
    b(label_2c4);
  label_2c4:
}

function HA_SHOP_END_0()
{
    bitGet(var_0, MBIT_KE_MONSYOU);
    bne(var_0, 0, label_2e2);
    ref_2c7 = bustupLoad(bustup_e5);
    bustupWait(ref_2c7);
    ref_2c9 = bustupAlloc(ref_2c7, right, rgb(0,0,0));
    bustupFade(ref_2c9, rgb(128,0,0), 30);
    ref_2cb = dialogAlloc();
    ref_2cc = msgShow(msg_25);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]What are you waiting for?
[tab]Hurry and pick the rumor to spread.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_19, 1);
    unitWait(shopkeeper);
    delayClear();
    delayWait(40);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    unitWait(shopkeeper);
    delayClear();
    delayWait(10);
    unitAnimationPlay(shopkeeper, animation_6, 1);
    wait(ref_2cc);
    shopOverlayInit();
    unitAnimationPlay(shopkeeper, animation_24, 1);
    wait(ref_2cc);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    dialogFree(ref_2cb);
    ref_2dc = bustupFade(ref_2c9, rgb(0,0,0), 10);
    bustupWait(ref_2dc);
    bustupFree(ref_2c9);
    unitRestoreFacing(shopkeeper);
    controlEnable();
    b(label_301);
  label_2e2:
    bne(var_0, 1, label_301);
    bitGet(var_0, EBIT_E0016);
    bne(var_0, 0, label_2e8);
    ref_2e5 = call(KYOUSEI2);
    wait(ref_2e5);
    b(label_300);
  label_2e8:
    bne(var_0, 1, label_300);
    ref_2e9 = bustupLoad(bustup_e5);
    bustupWait(ref_2e9);
    ref_2eb = bustupAlloc(ref_2e9, right, rgb(0,0,0));
    bustupFade(ref_2eb, rgb(128,0,0), 30);
    ref_2ed = dialogAlloc();
    ref_2ee = msgShow(msg_26);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]We can only help you manipulate rumors.
[tab]The rest is up to you.
[tab]Then... see you later.
[wait][clear]
***************************************/
    unitAnimationPlay(shopkeeper, animation_24, 1);
    wait(ref_2ee);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    shopOverlayInit();
    dialogFree(ref_2ed);
    ref_2f4 = bustupFade(ref_2eb, rgb(0,0,0), 10);
    bustupWait(ref_2f4);
    bustupFree(ref_2eb);
    bitGet(var_0, MBIT_EXITBIT);
    bne(var_0, 0, label_2fc);
    unitRestoreFacing(shopkeeper);
    controlEnable();
    b(label_2ff);
  label_2fc:
    bne(var_0, 1, label_2ff);
    call(GOOUT);
    b(label_2ff);
  label_2ff:
    b(label_300);
  label_300:
    b(label_301);
  label_301:
}

function TAMAKI()
{
    controlDisable();
    unitFacePlayer(tamaki);
    bitGet(var_0, MBIT_KE_MONSYOU);
    bne(var_0, 0, label_315);
    unitAnimationPlay(tamaki, animation_24, 1);
    ref_307 = bustupLoad(bustup_e6);
    bustupWait(ref_307);
    ref_309 = bustupAlloc(ref_307, right, rgb(0,0,0));
    bustupFade(ref_309, rgb(128,0,0), 30);
    ref_30b = dialogAlloc();
    ref_30c = msgShow(msg_27);
/***************************************
[color(yellow)]Tamaki[color(white)]
[tab]Don’t ask me for a job, ask the chief.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_30c);
    dialogFree(ref_30b);
    unitAnimationPlay(katsuya, animation_0, 1);
    ref_311 = bustupFade(ref_309, rgb(0,0,0), 10);
    bustupWait(ref_311);
    bustupFree(ref_309);
    b(label_328);
  label_315:
    bne(var_0, 1, label_328);
    unitAnimationPlay(tamaki, animation_24, 1);
    ref_317 = bustupLoad(bustup_e6);
    bustupWait(ref_317);
    ref_319 = bustupAlloc(ref_317, right, rgb(0,0,0));
    bustupFade(ref_319, rgb(128,0,0), 30);
    ref_31b = dialogAlloc();
    ref_31c = msgShow(msg_28);
/***************************************
[color(yellow)]Tamaki[color(white)]
[tab]I was surprised.
[tab]There’s a lot of Persona users, huh.
[tab]In my high school, there were 9 of them.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_31c);
    ref_31f = msgShow(msg_29);
/***************************************
[color(yellow)]Tamaki[color(white)]
[tab]Hmm?
[tab]I thought I knew more, but
[tab]I guess not...?
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_31f);
    dialogFree(ref_31b);
    unitAnimationPlay(tamaki, animation_0, 1);
    ref_324 = bustupFade(ref_319, rgb(0,0,0), 10);
    bustupWait(ref_324);
    bustupFree(ref_319);
    b(label_328);
  label_328:
    unitRestoreFacing(tamaki);
    controlEnable();
}

function DOORBOX()
{
    controlDisable();
    bitGet(var_0, EBIT_E0016);
    bne(var_0, 0, label_340);
    unitFacePlayer(tamaki);
    unitAnimationPlay(tamaki, animation_24, 1);
    ref_330 = bustupLoad(bustup_e6);
    bustupWait(ref_330);
    ref_332 = bustupAlloc(ref_330, right, rgb(0,0,0));
    bustupFade(ref_332, rgb(128,0,0), 30);
    ref_334 = dialogAlloc();
    ref_335 = msgShow(msg_30);
/***************************************
[color(yellow)]Tamaki[color(white)]
[tab]What are you going to do about the rumor?
[tab]Talk to the chief.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_335);
    unitAnimationPlay(tamaki, animation_0, 1);
    dialogFree(ref_334);
    ref_33a = bustupFade(ref_332, rgb(0,0,0), 10);
    bustupWait(ref_33a);
    bustupFree(ref_332);
    unitRestoreFacing(tamaki);
    controlEnable();
    b(label_348);
  label_340:
    bne(var_0, 1, label_348);
    sndMusicPlay(sound_30d9, 127);
    objAnimRotate(obj_5b, 0, 70, 0, 30, 0);
    objAnimRotate(obj_5a, 0, -70, 0, 30, 0);
    objAnimWait(obj_5b);
    objAnimWait(obj_5a);
    mapLoad(rengedai, 0, 0);
    b(label_348);
  label_348:
}

function GOOUT()
{
    bitClear(MBIT_EXITBIT);
    mapLoad(rengedai, 0, 0);
}

function warp1()
{
    call(DOORBOX);
}

function BIGNEKO()
{
    controlDisable();
    bitGet(var_0, MBIT_KUZU_HATUBIGNEKO);
    bne(var_0, 0, label_35c);
    countGet(var_0, nekomata);
    bez(var_0, label_35e);
    div(var_0, var_0, 10);
    countSet(nekomata, var_0);
    ref_355 = dialogAlloc();
    ref_356 = msgShow(msg_31);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]Long time no see, meow♥
[tab]Adults insert ¥1000, meow♥
[wait][clear]
***************************************/
    sndMusicPlay(sound_30d4, 127);
    wait(ref_356);
    dialogFree(ref_355);
    b(label_363);
    b(label_35e);
  label_35c:
    bne(var_0, 1, label_35e);
    b(label_35e);
  label_35e:
    ref_35e = dialogAlloc();
    ref_35f = msgShow(msg_32);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]Adults insert ¥1000, meow♥
[wait][clear]
***************************************/
    sndMusicPlay(sound_30d4, 127);
    wait(ref_35f);
    dialogFree(ref_35e);
  label_363:
    bitSet(MBIT_KUZU_HATUBIGNEKO);
    shopCurrencyType(8, -110, 150);
    shopCurrencyDisplay(13, 150, false);
    choiceSetResult(1);
    op_105(1);
    ref_368 = bustupLoad(bustup_1);
    bustupWait(ref_368);
    ref_36a = bustupAlloc(ref_368, center, rgb(0,0,0));
    bustupFade(ref_36a, rgb(128,0,0), 30);
    ref_36c = dialogChoiceAlloc();
    ref_36d = msgShow(msg_33);
/***************************************
[tab]Please insert ¥1000, meow♥
[choice(2)]Insert
Don’t insert
[end_choice][clear]
***************************************/
    wait(ref_36d);
    dialogFree(ref_36c);
    ref_370 = bustupFade(ref_36a, rgb(0,0,0), 10);
    bustupWait(ref_370);
    bustupFree(ref_36a);
    choiceGetResult(var_7);
    bne(var_7, 0, label_3a3);
    partyMoneyGet(var_6);
    boutrange(var_6, 0, 999, label_37e);
    ref_377 = dialogAlloc();
    ref_378 = msgShow(msg_34);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]You don’t have any money, meow♥
[tab]Lying is the root of evil, meow♥
[tab]You’re days late and dollars short♥[wait][clear]
***************************************/
    wait(ref_378);
    dialogFree(ref_377);
    shopCurrencyDisplay(-110, 150, true);
    controlEnable();
    b(label_3a2);
  label_37e:
    sndMusicPlay(sound_30d5, 127);
    partyMoneyAdd(-1000);
    delayClear();
    delayWait(60);
    shopCurrencyDisplay(-110, 150, true);
    countGet(var_0, nekomata);
    add(var_0, var_0, 1);
    countSet(nekomata, var_0);
    bne(var_0, 20, label_38c);
    ref_387 = dialogAlloc();
    ref_388 = msgShow(msg_35);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]I’m impressed, meow♥[delay(15)]
[tab]Received ¥1000 20 times already meow♥[delay(15)]
[tab]I’ll expect more from now on, meow♥[wait][clear]
***************************************/
    wait(ref_388);
    dialogFree(ref_387);
    b(label_3a0);
  label_38c:
    bne(var_0, 50, label_392);
    ref_38d = dialogAlloc();
    ref_38e = msgShow(msg_36);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]Meow meow meow♥[delay(15)][delay(15)]
[tab]Received ¥1000 50 times already, meow♥[delay(15)]
[tab]How generous onee-san, meow♥[wait][clear]
***************************************/
    wait(ref_38e);
    dialogFree(ref_38d);
    b(label_3a0);
  label_392:
    bne(var_0, 80, label_398);
    ref_393 = dialogAlloc();
    ref_394 = msgShow(msg_37);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]Wonderful! Great! Meowww.[delay(15)]
[tab]Received ¥1000 80 times already, meow♥[delay(15)]
[tab]Are you scheming something, meow?[wait][clear]
***************************************/
    wait(ref_394);
    dialogFree(ref_393);
    b(label_3a0);
  label_398:
    bne(var_0, 100, label_39b);
    b(label_3ad);
    b(label_3a0);
  label_39b:
    ref_39b = dialogAlloc();
    ref_39c = msgShow(msg_38);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]Thank you, meow♥[wait][clear]
***************************************/
    wait(ref_39c);
    dialogFree(ref_39b);
    b(label_3a0);
  label_3a0:
    controlEnable();
    b(label_3a2);
  label_3a2:
    b(label_3ac);
  label_3a3:
    bne(var_7, 1, label_3ac);
    sndMusicPlay(sound_30d6, 127);
    ref_3a5 = dialogAlloc();
    ref_3a6 = msgShow(msg_39);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]...[delay(15)]Cheaps-cat. [wait][clear]
***************************************/
    wait(ref_3a6);
    dialogFree(ref_3a5);
    shopCurrencyDisplay(-110, 150, true);
    controlEnable();
    b(label_3ac);
  label_3ac:
    b(label_464);
  label_3ad:
    ref_3ad = cameraRotateTo(2, 30);
    wait(ref_3ad);
    playerConvertToUnit(maya, sprite_0, east);
    playerHide();
    unitFace(maya, west);
    ref_3b2 = dialogAlloc();
    ref_3b3 = msgShow(msg_40);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]Finally the time has come, meow...[delay(15)]
[tab]The commemorative 100th time...[delay(15)]
[tab]I’ve saved up ¥100000, meow!
[wait][clear]
***************************************/
    sndMusicPlay(sound_30d7, 127);
    unitAnimationHold(maya, animation_22, -1);
    wait(ref_3b3);
    ref_3b7 = msgShow(msg_41);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]I feel guilty from receiving your
[tab]contributions for nothing, meow.[delay(30)]
[tab]So... [delay(15)]come here, meow!
[wait][clear]
***************************************/
    sndMusicPlay(sound_30d8, 127);
    wait(ref_3b7);
    dialogFree(ref_3b2);
    unitAnimationPlay(maya, animation_0, 1);
    unitWait(maya);
    delayClear();
    delayWait(30);
    unitAnimationPlay(maya, animation_12, 1);
    unitWait(maya);
    unitWait(maya);
    delayClear();
    delayWait(15);
    unitMove(maya, 640, -1160, face_south, fast);
    ref_3c5 = cameraRotateTo(3, 60);
    cameraFollow(maya);
    wait(ref_3c5);
    unitWait(maya);
    unitAnimationPlay(maya, animation_28, 2);
    wait(ref_3c5);
    delayClear();
    delayWait(30);
    ref_3cd = dialogAlloc();
    ref_3ce = msgShow(msg_42);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]Over here, over here,  meow♥
[wait][clear]
***************************************/
    sndMusicPlay(sound_30d8, 127);
    wait(ref_3ce);
    dialogFree(ref_3cd);
    unitAnimationPlay(maya, animation_0, 1);
    unitWait(maya);
    delayClear();
    delayWait(15);
    ref_3d6 = cameraRotateTo(1, 60);
    unitMove(maya, 640, -630, face_south, fast);
    cameraFollow(maya);
    unitMove(ulala, 515, -960, face_south, fast);
    unitMove(katsuya, 515, -740, face_south, medium);
    wait(ref_3d6);
    unitWait(maya);
    unitMove(maya, 760, -380, face_south, fast);
    cameraFollow(maya);
    wait(ref_3d6);
    unitWait(maya);
    unitAnimationPlay(maya, animation_28, 2);
    delayClear();
    delayWait(30);
    ref_3e4 = dialogAlloc();
    ref_3e5 = msgShow(msg_43);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]Don’t you understand, meow?
[tab]Over here, over here, meow!!
[wait][clear]
***************************************/
    sndMusicPlay(sound_30d8, 127);
    wait(ref_3e5);
    dialogFree(ref_3e4);
    unitAnimationPlay(maya, animation_0, 1);
    unitWait(maya);
    delayClear();
    delayWait(15);
    ref_3ed = cameraRotateTo(7, 60);
    unitMove(maya, 760, -150, face_east, fast);
    cameraFollow(maya);
    wait(ref_3ed);
    ref_3f1 = cameraRotateTo(5, 60);
    unitWait(maya);
    wait(ref_3f1);
    unitMove(maya, 455, -150, face_east, fast);
    cameraFollow(maya);
    wait(ref_3f1);
    unitWait(maya);
    delayClear();
    delayWait(30);
    sndMusicPlay(sound_30db, 127);
    sndVolumeFadeOff(sound_3005, 120);
    objAnimRotate(obj_6, 0, 110, 0, 30, 0);
    objAnimWait(obj_6);
    objVisible(obj_1b, false);
    unitMove(maya, 300, -150, face_east, fast);
    cameraFollow(maya);
    delayClear();
    delayWait(30);
    ref_403 = cameraRotateTo(3, 90);
    sndMusicPlay(sound_30de, 127);
    wait(ref_403);
    unitSpawn(tamaki, sprite_a9, 760, 0, -470, north, none);
    unitMove(tamaki, 760, -150, face_east, fast);
    unitWait(tamaki);
    unitWait(maya);
    unitMove(tamaki, 370, -150, face_east, fast);
    delayClear();
    delayWait(15);
    ref_40d = dialogAlloc();
    ref_40e = msgShow(msg_44);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]Nice to meet you...[delay(30)]Meow meow!!
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_8, 1);
    delayClear();
    delayWait(30);
    unitFace(maya, west);
    wait(ref_40e);
    unitAnimationPlay(npc1, animation_1c, 1);
    dialogFree(ref_40d);
    unitWait(tamaki);
    unitMove(tamaki, 330, -150, face_east, fast);
    unitMove(maya, 300, -250, face_south, fast);
    unitWait(tamaki);
    unitWait(maya);
    delayClear();
    delayWait(10);
    unitFaceUnit(tamaki, npc1);
    ref_41e = bustupLoad(bustup_e6);
    bustupWait(ref_41e);
    ref_420 = bustupAlloc(ref_41e, right, rgb(0,0,0));
    bustupFade(ref_420, rgb(128,0,0), 30);
    ref_422 = dialogAlloc();
    ref_423 = msgShow(msg_45);
/***************************************
[color(yellow)]Tamaki[color(white)]
[tab]Hey, what are you doing?!!
[wait][clear]
***************************************/
    unitAnimationPlay(tamaki, animation_26, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(npc1, animation_1d, 1);
    wait(ref_423);
    unitAnimationPlay(tamaki, animation_0, 1);
    dialogFree(ref_422);
    ref_42b = bustupFade(ref_420, rgb(0,0,0), 10);
    bustupWait(ref_42b);
    bustupFree(ref_420);
    delayClear();
    delayWait(10);
    ref_430 = dialogAlloc();
    ref_431 = msgShow(msg_46);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]Ta, [delay(30)]Tamaki-chan!!
[tab]S... sorry, meow.
[tab]I was so bored... I just...
[wait][clear]
***************************************/
    wait(ref_431);
    dialogFree(ref_430);
    delayClear();
    delayWait(10);
    ref_436 = bustupLoad(bustup_e6);
    bustupWait(ref_436);
    ref_438 = bustupAlloc(ref_436, right, rgb(0,0,0));
    bustupFade(ref_438, rgb(128,0,0), 30);
    unitFace(tamaki, north);
    ref_43b = dialogAlloc();
    ref_43c = msgShow(msg_47);
/***************************************
[color(yellow)]Tamaki[color(white)]
[tab]I’m sorry Maya-san.
[tab]She just likes to play tricks.
[wait][clear]
***************************************/
    unitAnimationPlay(tamaki, animation_24, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(npc1, animation_0, 1);
    wait(ref_43c);
    unitFace(tamaki, east);
    ref_443 = msgShow(msg_48);
/***************************************
[color(yellow)]Tamaki[color(white)]
[tab]Geez!!
[tab]Apologize to Maya-san too!
[tab]...My gosh!
[wait][clear]
***************************************/
    unitAnimationPlay(tamaki, animation_26, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(npc1, animation_1d, 1);
    wait(ref_443);
    unitAnimationPlay(tamaki, animation_0, 1);
    dialogFree(ref_43b);
    ref_44b = bustupFade(ref_438, rgb(0,0,0), 10);
    bustupWait(ref_44b);
    bustupFree(ref_438);
    unitAnimationPlay(tamaki, animation_a, 1);
    unitWait(tamaki);
    unitFace(tamaki, west);
    unitMove(tamaki, 760, -150, face_north, fast);
    delayClear();
    delayWait(30);
    unitMove(maya, 300, -150, face_east, fast);
    unitWait(maya);
    unitAnimationPlay(npc1, animation_0, 1);
    unitWait(tamaki);
    unitMove(tamaki, 760, -470, face_north, fast);
    ref_459 = dialogAlloc();
    ref_45a = msgShow(msg_49);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]S-So-wee... As a token of
[tab]apology, I’ll tell you my most
[tab]treasured rumor, meow!
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_45a);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_459);
    unitWait(tamaki);
    unitSpawn(tamaki, sprite_a9, 510, 0, -1220, south, none);
    unitSpawn(ulala, sprite_6, 610, 30, -960, south, none);
    unitSpawn(katsuya, sprite_d, 650, 30, -740, north, none);
    call(MAN1);
  label_464:
}

function OKUNOHEYA()
{
    bitGet(var_0, MBIT_KUZU_HATUNEKO);
    bne(var_0, 0, label_46f);
    controlDisable();
    ref_468 = dialogAlloc();
    ref_469 = msgShow(msg_50);
/***************************************
[color(yellow)]Lucky Cat[color(white)]
[tab]That probably won’t open, meow.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_469);
    dialogFree(ref_468);
    controlEnable();
    b(label_472);
  label_46f:
    bne(var_0, 1, label_472);
    call(MAN1);
    b(label_472);
  label_472:
}

function MAN1()
{
    bitGet(var_0, MBIT_KUZU_HATUNEKO);
    bne(var_0, 0, label_479);
    bitSet(MBIT_KUZU_HATUNEKO);
    envTriggerClear(collision_1, coll_1);
    b(label_48b);
    b(label_48b);
  label_479:
    bne(var_0, 1, label_48b);
    controlDisable();
    playerConvertToUnit(maya, sprite_0, north);
    playerHide();
    unitFaceUnit(maya, npc1);
    sndMusicPlay(sound_30db, 127);
    sndVolumeFadeOff(sound_3005, 120);
    objAnimRotate(obj_6, 0, 110, 0, 30, 0);
    objAnimWait(obj_6);
    ref_482 = cameraRotateTo(3, 45);
    unitMove(maya, 300, -150, face_east, fast);
    cameraFollow(maya);
    delayClear();
    delayWait(30);
    sndMusicPlay(sound_30de, 127);
    wait(ref_482);
    b(label_497);
    b(label_48b);
  label_48b:
    ref_48b = dialogAlloc();
    ref_48c = msgShow(msg_51);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]Let me start over... How do you do, meow?
[tab]I’m the rumor loving Nekomata, meow.
[tab]I collect rumors unknown to humans, meow.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_8, 1);
    wait(ref_48c);
    ref_48f = msgShow(msg_52);
/***************************************
[color(yellow)]Nekomata[color(green)]
[tab]Demon friend of the Devil Summoner Tamaki.
[tab]Likes pranks and has a weakness for money.
[tab]She knows much about demon rumors.[color(white)]
[wait][clear]
***************************************/
    wait(ref_48f);
    ref_491 = msgShow(msg_53);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]By the way...
[tab]What do you need today, meow?
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_491);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_48b);
    b(label_4a1);
  label_497:
    ref_497 = dialogAlloc();
    ref_498 = msgShow(msg_54);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]Me-ow, you’ve come again, meow!?
[tab]Did you want to hear my story, meow?
[tab]But, [delay(30)]don’t forget to knock, meow!
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_498);
    ref_49b = msgShow(msg_55);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]By the way...
[tab]What do you need today, meow?
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_49b);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_497);
    b(label_4a1);
  label_4a1:
    choiceSetResult(2);
    op_105(2);
    ref_4a3 = bustupLoad(bustup_1);
    bustupWait(ref_4a3);
    ref_4a5 = bustupAlloc(ref_4a3, center, rgb(0,0,0));
    bustupFade(ref_4a5, rgb(128,0,0), 30);
    ref_4a7 = dialogChoiceAlloc();
    ref_4a8 = msgShow(msg_56);
/***************************************
[tab]What do you need today, meow?
[choice(3)]I want to hear rumors
I want to talk to you
Nothing
[end_choice][clear]
***************************************/
    wait(ref_4a8);
    dialogFree(ref_4a7);
    ref_4ab = bustupFade(ref_4a5, rgb(0,0,0), 10);
    bustupWait(ref_4ab);
    bustupFree(ref_4a5);
    choiceGetResult(var_0);
    bne(var_0, 0, label_4b2);
    b(label_4b8);
    b(label_4b8);
  label_4b2:
    bne(var_0, 1, label_4b5);
    b(label_544);
    b(label_4b8);
  label_4b5:
    bne(var_0, 2, label_4b8);
    b(label_566);
    b(label_4b8);
  label_4b8:
    bitGet(var_0, EBIT_E0046);
    bez(var_0, label_4c7);
    bitGet(var_0, MBIT_TRI_ISATU);
    bez(var_0, label_4c7);
    bitGet(var_0, MBIT_HI_TRISHOKUJI);
    bez(var_0, label_4c7);
    bitGet(var_0, MBIT_KE_TRIKAISIN);
    bitGet(var_1, MBIT_KI_TRIKAISIN);
    add(var_1, var_1, var_0);
    bne(var_1, 0, label_4c5);
    li(var_5, 1);
    b(label_4f0);
    b(label_4c7);
  label_4c5:
    boutrange(var_1, 1, 2, label_4c7);
    b(label_4c7);
  label_4c7:
    bitGet(var_0, EBIT_E0018);
    bez(var_0, label_4e9);
    bitGet(var_0, MBIT_KE_KAORIAROMA);
    bitGet(var_1, MBIT_KI_KAORIAROMA);
    add(var_1, var_1, var_0);
    bne(var_1, 0, label_4d0);
    li(var_6, 1);
    b(label_4f0);
    b(label_4d2);
  label_4d0:
    boutrange(var_1, 1, 2, label_4d2);
    b(label_4d2);
  label_4d2:
    bitGet(var_0, MBIT_KE_ETEESTHE);
    bitGet(var_1, MBIT_KI_ETEESTHE);
    add(var_1, var_1, var_0);
    bne(var_1, 0, label_4d9);
    li(var_7, 1);
    b(label_4f0);
    b(label_4db);
  label_4d9:
    boutrange(var_1, 1, 2, label_4db);
    b(label_4db);
  label_4db:
    bitGet(var_0, MBIT_TRI_ISATU);
    bne(var_0, 0, label_4de);
    b(label_4e9);
  label_4de:
    bne(var_0, 1, label_4e9);
    bitGet(var_0, MBIT_KE_TRISHOKUJI);
    bitGet(var_1, MBIT_KI_TRISHOKUJI);
    add(var_1, var_1, var_0);
    bne(var_1, 0, label_4e6);
    li(var_8, 1);
    b(label_4f0);
    b(label_4e8);
  label_4e6:
    boutrange(var_1, 1, 2, label_4e8);
    b(label_4e8);
  label_4e8:
    b(label_4e9);
  label_4e9:
    ref_4e9 = dialogAlloc();
    ref_4ea = msgShow(msg_57);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]I don’t have any more rumors to
[tab]talk about, meow.
[tab]...Sorry, meow.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_4ea);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_4e9);
    b(label_543);
  label_4f0:
    ref_4f0 = dialogAlloc();
    unitAnimationPlay(npc1, animation_1a, 1);
    rand(var_0, 11);
    boutrange(var_0, 0, 3, label_4f7);
    ref_4f4 = msgShow(msg_58);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]You want to hear a rumor, meow?
[tab]Let’s see, meow.
[tab]You tell me a rumor also, meow!
[wait][clear]
***************************************/
    wait(ref_4f4);
    b(label_4ff);
  label_4f7:
    boutrange(var_0, 4, 7, label_4fb);
    ref_4f8 = msgShow(msg_59);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]You want me to tell you a rumor, meow!?
[tab]Then, tell me a rumor also, meow!
[tab]We’ll trade information, meow!
[wait][clear]
***************************************/
    wait(ref_4f8);
    b(label_4ff);
  label_4fb:
    boutrange(var_0, 8, 11, label_4ff);
    ref_4fc = msgShow(msg_60);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]My information is special, meow.
[tab]You have a rumor that will
[tab]match them, meow?
[wait][clear]
***************************************/
    wait(ref_4fc);
    b(label_4ff);
  label_4ff:
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_4f0);
    unitAnimationPlay(maya, animation_a, 1);
    delayClear();
    delayWait(20);
    unitAnimationPlay(maya, animation_2d, 1);
    delayClear();
    delayWait(60);
    unitAnimationPlay(maya, animation_a, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(npc1, animation_1a, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(npc1, animation_0, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(npc1, animation_1a, 1);
    delayClear();
    delayWait(15);
    unitAnimationPlay(npc1, animation_0, 1);
    delayClear();
    delayWait(15);
    ref_516 = dialogAlloc();
    unitAnimationPlay(npc1, animation_1a, 1);
    rand(var_0, 11);
    boutrange(var_0, 0, 3, label_51d);
    ref_51a = msgShow(msg_61);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]Is, is that true, meow!? 
[tab]I’ve just heard something big, meow! 
[tab]As promised, I will tell you also, meow.
[wait][clear]
***************************************/
    wait(ref_51a);
    b(label_525);
  label_51d:
    boutrange(var_0, 4, 7, label_521);
    ref_51e = msgShow(msg_62);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]Oh, a rumor about THAT person, meow?
[tab]Hmmm, humans are strange, meow.
[tab]Then, my turn, meow...
[wait][clear]
***************************************/
    wait(ref_51e);
    b(label_525);
  label_521:
    boutrange(var_0, 8, 11, label_525);
    ref_522 = msgShow(msg_63);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]I hear that rumor a lot, meow.
[tab]I’ll forgive you today, meow
[wait][clear]
***************************************/
    wait(ref_522);
    b(label_525);
  label_525:
    bnz(var_5, label_529);
    bnz(var_6, label_52f);
    bnz(var_7, label_535);
    bnz(var_8, label_53b);
  label_529:
    ref_529 = msgShow(msg_64);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]You know a demon [color(orange)]Trish[color(white)], meow?
[tab]I heard she’s [color(orange)]reformed[color(white)] herself!
[tab]I just can’t believe it, meow.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_529);
    bitSet(MBIT_KI_TRIKAISIN);
    li(var_5, 0);
    b(label_541);
  label_52f:
    ref_52f = msgShow(msg_65);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]You know a store [color(orange)]Kaori[color(white)], meow? Then,
[tab]do you know they [color(orange)]started aromatherapy[color(white)]?
[tab]I’m surprised that it works, meow!
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_52f);
    bitSet(MBIT_KI_KAORIAROMA);
    li(var_6, 0);
    b(label_541);
  label_535:
    ref_535 = msgShow(msg_66);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]That suspicious shop... What was it, meow?
[tab]The beauty spa [color(orange)]Etheria[color(white)] has a
[tab][color(orange)]new beauty treatment[color(white)]. I’m excited, meow.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_535);
    bitSet(MBIT_KI_ETEESTHE);
    li(var_7, 0);
    b(label_541);
  label_53b:
    ref_53b = msgShow(msg_67);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]Have you ever met [color(orange)]Trish[color(white)], meow?
[tab]Rumor is that [color(orange)]she’s started to sell
[tab]ice cream[color(white)] in the dungeon for a profit, meow.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_53b);
    bitSet(MBIT_KI_TRISHOKUJI);
    li(var_8, 0);
    b(label_541);
  label_541:
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_516);
  label_543:
    b(label_4a1);
  label_544:
    bitGet(var_0, EBIT_E0043);
    bnz(var_0, label_55f);
    bitGet(var_0, EBIT_E0033);
    bnz(var_0, label_558);
    bitGet(var_0, EBIT_E0018);
    bnz(var_0, label_551);
    ref_54a = dialogAlloc();
    ref_54b = msgShow(msg_68);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]Did you know? Tamaki-chan’s actually
[tab]a devil summoner, meow.
[tab]And I’m Tamaki-chan’s demon friend, meow.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_54b);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_54a);
    b(label_565);
  label_551:
    ref_551 = dialogAlloc();
    ref_552 = msgShow(msg_69);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]Jokers overwork demons, meow. That’s
[tab]why I hate them. They piss me off, meow!!
[tab]We can’t have more like’em, meow.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_552);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_551);
    b(label_565);
  label_558:
    ref_558 = dialogAlloc();
    ref_559 = msgShow(msg_70);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]Ahhh!! Did you know, meow!? Your new
[tab]comrade is a Persona user, meow!!
[tab]What, you knew? Awww, fooey, meow.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_559);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_558);
    b(label_565);
  label_55f:
    ref_55f = dialogAlloc();
    ref_560 = msgShow(msg_71);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]Demons are being neglected recently,
[tab]meow. What do you think of us demons?
[tab]You used to call us "comrade", meow?
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_1a, 1);
    wait(ref_560);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_55f);
  label_565:
    b(label_4a1);
  label_566:
    ref_566 = dialogAlloc();
    ref_567 = msgShow(msg_72);
/***************************************
[color(yellow)]Demon Rumormonger Nekomata[color(white)]
[tab]See you later, meow.
[wait][clear]
***************************************/
    unitAnimationPlay(npc1, animation_8, 1);
    wait(ref_567);
    unitAnimationPlay(npc1, animation_0, 1);
    dialogFree(ref_566);
    unitRestoreFacing(npc1);
    ref_56d = cameraRotateTo(5, 45);
    sndVolumeFadeOff(sound_30de, 120);
    unitMove(maya, 480, -150, face_west, fast);
    cameraFollow(maya);
    wait(ref_56d);
    sndMusicPlay(sound_3005, 127);
    sndMusicPlay(sound_30dc, 127);
    objAnimRotate(obj_6, 0, -110, 0, 30, 0);
    objAnimWait(obj_6);
    unitWait(maya);
    unitDespawn(maya, none);
    playerInit(west);
    controlEnable();
}

function KYOUSEI2()
{
    playerConvertToUnit(maya, sprite_0, east);
    playerHide();
    unitIdleOffAll();
    unitAnimationPlay(shopkeeper, animation_24, 1);
    ref_57f = bustupLoad(bustup_e5);
    bustupWait(ref_57f);
    ref_581 = bustupAlloc(ref_57f, right, rgb(0,0,0));
    bustupFade(ref_581, rgb(128,0,0), 30);
    ref_583 = dialogAlloc();
    ref_584 = msgShow(msg_73);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]The request is now approved.
[tab]Check the results yourself.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_584);
    ref_587 = msgShow(msg_74);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]If you have any other rumors to spread,
[tab]get information from the rumormongers.
[tab]They’re everywhere.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_587);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    shopOverlayInit();
    dialogFree(ref_583);
    ref_58d = bustupFade(ref_581, rgb(0,0,0), 10);
    bustupWait(ref_58d);
    bustupFree(ref_581);
    cameraRotateTo(5, 60);
    ref_591 = unitMove(tamaki, 460, -1120, face_east, fast);
    wait(ref_591);
    ref_593 = unitMove(tamaki, 300, -1120, face_east, fast);
    wait(ref_593);
    delayClear();
    delayWait(15);
    unitFaceUnit(maya, tamaki);
    unitAnimationPlay(tamaki, animation_24, 1);
    ref_599 = bustupLoad(bustup_e6);
    bustupWait(ref_599);
    ref_59b = bustupAlloc(ref_599, right, rgb(0,0,0));
    bustupFade(ref_59b, rgb(128,0,0), 30);
    ref_59d = dialogAlloc();
    ref_59e = msgShow(msg_75);
/***************************************
[color(yellow)]Tamaki[color(white)]
[tab]That "D五j二 Vu Boy" seems to
[tab]be looking for the source of the rumors...
[tab]I know of a good underground page.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_59e);
    unitAnimationPlay(tamaki, animation_0, 1);
    dialogFree(ref_59d);
    ref_5a3 = bustupFade(ref_59b, rgb(0,0,0), 10);
    bustupWait(ref_5a3);
    bustupFree(ref_59b);
    delayClear();
    delayWait(60);
    screenEffectInit();
    screenFade(160, 120, rgb(0,0,0), rgb(0,0,0), sub);
    screenFadeInner(rgb(255,255,255), 9, false);
    screenFadeOuter(rgb(255,255,255), 9, false);
    screenFadeWait(inner);
    screenFadeWait(outer);
    unitSpawn(ulala, sprite_6, 130, 0, -940, south, none);
    unitSpawn(katsuya, sprite_d, 110, 0, -790, west, none);
    unitSpawn(shopkeeper, sprite_9c, 210, 0, -1070, east, none);
    unitSpawn(tamaki, sprite_a9, 110, 0, -1020, south, none);
    unitSpawn(maya, sprite_0, 170, 0, -880, west, none);
    unitAnimationPlay(tamaki, animation_0, 1);
    unitAnimationPlay(katsuya, animation_0, 1);
    unitAnimationPlay(ulala, animation_0, 1);
    unitAnimationPlay(shopkeeper, animation_0, 1);
    unitIdleOffAll();
    ref_5b8 = cameraRotateTo(6, 5);
    wait(ref_5b8);
    cameraMoveTo(50, 0, -860, 5);
    objAnimTranslate(obj_13, 0, 0, 50, 5);
    objAnimWait(obj_13);
    delayClear();
    delayWait(75);
    screenEffectUnknown();
    screenFadeInner(rgb(0,0,0), 9, true);
    screenFadeOuter(rgb(0,0,0), 9, true);
    screenFadeWait(inner);
    screenFadeWait(outer);
    unitAnimationPlay(tamaki, animation_24, 1);
    ref_5c5 = bustupLoad(bustup_e6);
    bustupWait(ref_5c5);
    ref_5c7 = bustupAlloc(ref_5c5, right, rgb(0,0,0));
    bustupFade(ref_5c7, rgb(128,0,0), 30);
    ref_5c9 = dialogAlloc();
    ref_5ca = msgShow(msg_76);
/***************************************
[color(yellow)]Tamaki[color(white)]
[tab]"Baofu", who’s a friend of the chief, has a
[tab]web page with all the rumors in this city.
[tab]He’s in a chat room right now.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_5ca);
    unitAnimationPlay(tamaki, animation_0, 1);
    dialogFree(ref_5c9);
    ref_5cf = bustupFade(ref_5c7, rgb(0,0,0), 10);
    bustupWait(ref_5cf);
    bustupFree(ref_5c7);
    delayClear();
    delayWait(60);
    ref_5d4 = bustupLoad(bustup_eb);
    bustupWait(ref_5d4);
    ref_5d6 = bustupAlloc(ref_5d4, right, rgb(0,0,0));
    bustupFade(ref_5d6, rgb(128,0,0), 30);
    ref_5d8 = dialogAlloc();
    ref_5d9 = msgShow(msg_77);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]Rabbit, you saw the Joker...?
[tab]They say no one escapes once he’s after you.
[tab]How’d you survive?
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_5d9);
    dialogFree(ref_5d8);
    ref_5dd = bustupFade(ref_5d6, rgb(0,0,0), 10);
    bustupWait(ref_5dd);
    bustupFree(ref_5d6);
    delayClear();
    delayWait(30);
    ref_5e2 = bustupLoad(bustup_eb);
    bustupWait(ref_5e2);
    ref_5e4 = bustupAlloc(ref_5e2, right, rgb(0,0,0));
    bustupFade(ref_5e4, rgb(128,0,0), 30);
    ref_5e6 = dialogAlloc();
    ref_5e7 = msgShow(msg_78);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]So you’re saying I wouldn’t
[tab]believe it...?[delay(120)]
[tab]Oh, well... I’ll know when I see you.
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_5e7);
    ref_5ea = msgShow(msg_79);
/***************************************
[color(yellow)]Baofu[color(white)]
[tab]We’ll meet at Double Slash in Aoba, Rabbit.
[tab]Tell the worker my handle, and do what
[tab]they tell you...
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_5ea);
    dialogFree(ref_5e6);
    ref_5ee = bustupFade(ref_5e4, rgb(0,0,0), 10);
    bustupWait(ref_5ee);
    bustupFree(ref_5e4);
    delayClear();
    delayWait(60);
    unitAnimationPlay(katsuya, animation_2d, 1);
    ref_5f4 = bustupLoad(bustup_21);
    bustupWait(ref_5f4);
    ref_5f6 = bustupAlloc(ref_5f4, left, rgb(0,0,0));
    bustupFade(ref_5f6, rgb(128,0,0), 30);
    ref_5f8 = dialogAlloc();
    ref_5f9 = msgShow(msg_80);
/***************************************
[color(yellow)]Katsuya[color(white)]
[tab]Sounds suspicious...
[tab]Should we go?
[sync][wait][clear]
***************************************/
    sync();
    wait(ref_5f9);
    unitAnimationPlay(katsuya, animation_0, 1);
    dialogFree(ref_5f8);
    ref_5fe = bustupFade(ref_5f6, rgb(0,0,0), 10);
    bustupWait(ref_5fe);
    bustupFree(ref_5f6);
    delayClear();
    delayWait(30);
    unitAnimationPlay(maya, animation_12, 1);
    unitWait(maya);
    unitFace(maya, east);
    unitAnimationPlay(maya, animation_0, 1);
    delayClear();
    delayWait(30);
    unitAnimationPlay(maya, animation_24, 1);
    unitWait(maya);
    bitSet(EBIT_E0016);
    enableSaving(true);
    delayClear();
    delayWait(120);
    screenEffectInit();
    screenFade(160, 120, rgb(0,0,0), rgb(0,0,0), sub);
    screenFadeInner(rgb(255,255,255), 9, false);
    screenFadeOuter(rgb(255,255,255), 9, false);
    screenFadeWait(inner);
    screenFadeWait(outer);
    unitIdleOffAll();
    delayClear();
    delayWait(30);
    unitSpawn(ulala, sprite_6, 610, 30, -960, south, none);
    unitSpawn(katsuya, sprite_d, 650, 30, -740, north, none);
    unitSpawn(shopkeeper, sprite_9c, 120, 0, -1120, east, none);
    unitSpawn(tamaki, sprite_a9, 510, 0, -1220, south, none);
    objAnimTranslate(obj_13, 0, 0, -50, 5);
    objAnimWait(obj_13);
    ref_61e = cameraLookAtUnit(maya, 0, 5);
    wait(ref_61e);
    unitDespawn(maya, none);
    playerInit(northwest);
    controlDisable();
    delayClear();
    delayWait(45);
    unitIdleOnAll();
    screenEffectUnknown();
    screenFadeInner(rgb(0,0,0), 9, true);
    screenFadeOuter(rgb(0,0,0), 9, true);
    screenFadeWait(inner);
    screenFadeWait(outer);
    controlEnable();
}

function HA_SHOP_EXPLAIN_0()
{
    ref_62d = dialogAlloc();
    ref_62e = msgShow(msg_81);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]Want the lowdown on rumors?
[wait][clear][color(yellow)]Chief Todoroki[color(white)]
[tab]Ask me to spread a rumor of your choice and
[tab]I’ll do it. Not for free, mind you.
[wait][clear][color(yellow)]Chief Todoroki[color(white)]
[tab]You’ll need to bring me rumors you hear from
[tab]rumormongers.
[wait][clear][color(yellow)]Chief Todoroki[color(white)]
[tab]There are rumormongers everywhere in Sumaru.
[tab]Dig a little and you’ll find them.
[wait][clear][color(yellow)]Chief Todoroki[color(white)]
[tab]You can remind yourself which rumors are
[tab]already circulating by asking me to Check
[tab]rumors.
[wait][clear][color(yellow)]Chief Todoroki[color(white)]
[tab]Not only can you remember which rumors I’ve
[tab]been putting out there for you, you can see
[tab]which ones demons are spreading.
[wait][clear]
***************************************/
    wait(ref_62e);
    dialogFree(ref_62d);
}

function DECIDE_ROHA()
{
    choiceSetResult(1);
    op_105(1);
    unitFacePlayer(shopkeeper);
    ref_635 = bustupLoad(bustup_e5);
    bustupWait(ref_635);
    ref_637 = bustupAlloc(ref_635, left, rgb(0,0,0));
    bustupFade(ref_637, rgb(128,0,0), 30);
    ref_639 = dialogAlloc();
    ref_63a = msgShow(msg_82);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]I’ll spread this rumor for free.
[tab]Now, are you sure you want this one?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_63a);
    choiceGetResult(var_7);
    bne(var_7, 0, label_640);
    li(var_7, 1);
    b(label_643);
  label_640:
    bne(var_7, 1, label_643);
    li(var_7, 0);
    b(label_643);
  label_643:
    wait(ref_63a);
    dialogFree(ref_639);
    ref_645 = bustupFade(ref_637, rgb(0,0,0), 10);
    bustupWait(ref_645);
    bustupFree(ref_637);
}

function DECIDE()
{
    choiceSetResult(1);
    op_105(1);
    msgVar_Number(msgvar_0, var_6);
    unitFacePlayer(shopkeeper);
    ref_64d = bustupLoad(bustup_e5);
    bustupWait(ref_64d);
    ref_64f = bustupAlloc(ref_64d, left, rgb(0,0,0));
    bustupFade(ref_64f, rgb(128,0,0), 30);
    ref_651 = dialogAlloc();
    ref_652 = msgShow(msg_83);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]I need ¥[var(msg_var_0)] to spread this rumor.
[tab]Do you want me to do it?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_652);
    choiceGetResult(var_7);
    bne(var_7, 0, label_658);
    li(var_7, 1);
    b(label_65b);
  label_658:
    bne(var_7, 1, label_65b);
    li(var_7, 0);
    b(label_65b);
  label_65b:
    wait(ref_652);
    dialogFree(ref_651);
    ref_65d = bustupFade(ref_64f, rgb(0,0,0), 10);
    bustupWait(ref_65d);
    bustupFree(ref_64f);
}

function DECIDE_2()
{
    choiceSetResult(1);
    op_105(1);
    msgVar_Number(msgvar_0, var_6);
    unitFacePlayer(shopkeeper);
    ref_665 = bustupLoad(bustup_e5);
    bustupWait(ref_665);
    ref_667 = bustupAlloc(ref_665, left, rgb(0,0,0));
    bustupFade(ref_667, rgb(128,0,0), 30);
    ref_669 = dialogAlloc();
    ref_66a = msgShow(msg_84);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]I don’t know the outcome of this rumor...
[tab]I need ¥[var(msg_var_0)] to spread this rumor.
[tab]Do you want me to do it?
[choice(2)]Yes
No
[end_choice][clear]
***************************************/
    wait(ref_66a);
    choiceGetResult(var_7);
    bne(var_7, 0, label_670);
    li(var_7, 1);
    b(label_673);
  label_670:
    bne(var_7, 1, label_673);
    li(var_7, 0);
    b(label_673);
  label_673:
    wait(ref_66a);
    dialogFree(ref_669);
    ref_675 = bustupFade(ref_667, rgb(0,0,0), 10);
    bustupWait(ref_675);
    bustupFree(ref_667);
}

function NOMONEY()
{
    unitFacePlayer(shopkeeper);
    ref_67a = bustupLoad(bustup_e5);
    bustupWait(ref_67a);
    ref_67c = bustupAlloc(ref_67a, left, rgb(0,0,0));
    bustupFade(ref_67c, rgb(128,0,0), 30);
    ref_67e = dialogAlloc();
    ref_67f = msgShow(msg_85);
/***************************************
[color(yellow)]Chief Todoroki[color(white)]
[tab]You don’t have enough money. [wait][clear]
***************************************/
    wait(ref_67f);
    dialogFree(ref_67e);
    ref_682 = bustupFade(ref_67c, rgb(0,0,0), 10);
    bustupWait(ref_682);
    bustupFree(ref_67c);
}

function HONDANA()
{
    bitGet(var_0, EBIT_E0038);
    bne(var_0, 0, label_68f);
    controlDisable();
    ref_689 = dialogAlloc();
    ref_68a = msgShow(msg_86);
/***************************************
[color(yellow)]Bookshelf[color(white)]
[tab][color(green)]A sliding bookshelf.
[tab]It looks like it can move...[color(white)]
[wait][clear]
***************************************/
    wait(ref_68a);
    dialogFree(ref_689);
    controlEnable();
    b(label_6ad);
  label_68f:
    bne(var_0, 1, label_6ad);
    bitGet(var_0, MBIT_KUZUNOHA_MAG);
    bne(var_0, 0, label_6a4);
    bitGet(var_0, LBIT_0010);
    bne(var_0, 0, label_69b);
    controlDisable();
    sndMusicPlay(sound_30dd, 127);
    objAnimTranslate(obj_11, 0, 0, 90, 30);
    objAnimWait(obj_11);
    bitSet(LBIT_0010);
    controlEnable();
    b(label_6a3);
  label_69b:
    bne(var_0, 1, label_6a3);
    controlDisable();
    ref_69d = dialogAlloc();
    ref_69e = msgShow(msg_87);
/***************************************
[color(yellow)]Bookshelf[color(white)]
[tab][color(green)]A sliding shelf, but doesn’t seem to move.[color(white)]
[wait][clear]
***************************************/
    wait(ref_69e);
    dialogFree(ref_69d);
    controlEnable();
    b(label_6a3);
  label_6a3:
    b(label_6ac);
  label_6a4:
    bne(var_0, 1, label_6ac);
    controlDisable();
    ref_6a6 = dialogAlloc();
    ref_6a7 = msgShow(msg_88);
/***************************************
[color(yellow)]Bookshelf[color(white)]
[tab][color(green)]A sliding shelf, but doesn’t seem to move.[color(white)]
[wait][clear]
***************************************/
    wait(ref_6a7);
    dialogFree(ref_6a6);
    controlEnable();
    b(label_6ac);
  label_6ac:
    b(label_6ad);
  label_6ad:
}

function MAGAZIN()
{
    bitGet(var_0, EBIT_E0038);
    bne(var_0, 0, label_6b1);
    b(label_6c1);
  label_6b1:
    bne(var_0, 1, label_6c1);
    bitGet(var_0, MBIT_KUZUNOHA_MAG);
    bne(var_0, 0, label_6be);
    controlDisable();
    msgVarSet(msgvar_1, 87);
    ref_6b6 = dialogAlloc();
    ref_6b7 = msgShow(msg_89);
/***************************************
[color(yellow)]Bookshelf[color(white)]
[tab][color(green)]Maya got [item_with_type(item_fffe)].[color(white)]
[wait][clear]
***************************************/
    wait(ref_6b7);
    dialogFree(ref_6b6);
    partyItemAdd(sumaru_magazine, 1);
    bitSet(MBIT_KUZUNOHA_MAG);
    controlEnable();
    b(label_6c0);
  label_6be:
    bne(var_0, 1, label_6c0);
    b(label_6c0);
  label_6c0:
    b(label_6c1);
  label_6c1:
}

function NEKOMATACHECK()
{
    bitGet(var_0, MBIT_KUZU_HATUNEKO);
    bne(var_0, 0, label_6c6);
    envTriggerSet(BIGNEKO, 255, 1, collision_1, coll_1);
    b(label_6c8);
  label_6c6:
    bne(var_0, 1, label_6c8);
    b(label_6c8);
  label_6c8:
    bitGet(var_0, MBIT_KUZU_HATUNEKO);
    bez(var_0, label_6cb);
    objVisible(obj_1b, false);
  label_6cb:
    ref_6cb = spriteLoad(sprite_8b);
    wait(ref_6cb);
    unitSpawn(npc1, sprite_8b, 200, 0, -150, west, none);
    unitTriggerSet(npc1, MAN1, 255, 1);
}
